%h1 Users index
%h2 There #{is_pluralize(@users.length, 'user')}

%h3
  = link_to 'Add user', new_admin_user_path
%br

= will_paginate @users
%table.table.table-striped.table-bordered.table-hover
  %tr
    %th Name
    %th Email
    %th role
    %th
    %th
    -if current_user.is_admin?
      %th
    - @users.each do |user|
      %tr
        %td= link_to user.full_name, admin_user_path(user.id)
        %td= user.email
        %td
          %ul
          - user.user_roles.each do |user_role|
            %li= user_role.role_name
        %td= link_to 'Delete', admin_user_path(user.id), method: :delete, data: {confirm: 'Are you sure to delete?'}
        %td= link_to 'Edit', edit_admin_user_path(user.id)
        -if current_user.is_admin?
          %td
            = link_to 'manage Roles', admin_user_user_roles_path(user.id)
= will_paginate @users